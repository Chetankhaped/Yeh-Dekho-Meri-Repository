import{l as Y}from"./monaco-editor-loader-D5VDKzXM-1759842755623.js";import{r as t,R as y}from"./react-DlxZUTCp-1759842755623.js";var T={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},X=T,ee={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},te=ee;function re({children:r}){return y.createElement("div",{style:te.container},r)}var ne=re,ue=ne;function ie({width:r,height:o,isEditorReady:l,loading:u,_ref:p,className:h,wrapperProps:w}){return y.createElement("section",{style:{...X.wrapper,width:r,height:o},...w},!l&&y.createElement(ue,null,u),y.createElement("div",{ref:p,style:{...X.fullWidth,...!l&&X.hide},className:h}))}var oe=ie,Z=t.memo(oe);function ae(r){t.useEffect(r,[])}var $=ae;function ce(r,o,l=!0){let u=t.useRef(!0);t.useEffect(u.current||!l?()=>{u.current=!1}:r,o)}var m=ce;function F(){}function x(r,o,l,u){return le(r,u)||se(r,o,l,u)}function le(r,o){return r.editor.getModel(q(r,o))}function se(r,o,l,u){return r.editor.createModel(o,l,u?q(r,u):void 0)}function q(r,o){return r.Uri.parse(o)}function de({original:r,modified:o,language:l,originalLanguage:u,modifiedLanguage:p,originalModelPath:h,modifiedModelPath:w,keepCurrentOriginalModel:L=!1,keepCurrentModifiedModel:W=!1,theme:R="light",loading:_="Loading...",options:E={},height:j="100%",width:A="100%",className:B,wrapperProps:G={},beforeMount:J=F,onMount:Q=F}){let[M,b]=t.useState(!1),[C,d]=t.useState(!0),f=t.useRef(null),s=t.useRef(null),P=t.useRef(null),g=t.useRef(Q),i=t.useRef(J),S=t.useRef(!1);$(()=>{let e=Y.init();return e.then(a=>(s.current=a)&&d(!1)).catch(a=>(a==null?void 0:a.type)!=="cancelation"&&console.error("Monaco initialization: error:",a)),()=>f.current?N():e.cancel()}),m(()=>{if(f.current&&s.current){let e=f.current.getOriginalEditor(),a=x(s.current,r||"",u||l||"text",h||"");a!==e.getModel()&&e.setModel(a)}},[h],M),m(()=>{if(f.current&&s.current){let e=f.current.getModifiedEditor(),a=x(s.current,o||"",p||l||"text",w||"");a!==e.getModel()&&e.setModel(a)}},[w],M),m(()=>{let e=f.current.getModifiedEditor();e.getOption(s.current.editor.EditorOption.readOnly)?e.setValue(o||""):o!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:o||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[o],M),m(()=>{var e,a;(a=(e=f.current)==null?void 0:e.getModel())==null||a.original.setValue(r||"")},[r],M),m(()=>{let{original:e,modified:a}=f.current.getModel();s.current.editor.setModelLanguage(e,u||l||"text"),s.current.editor.setModelLanguage(a,p||l||"text")},[l,u,p],M),m(()=>{var e;(e=s.current)==null||e.editor.setTheme(R)},[R],M),m(()=>{var e;(e=f.current)==null||e.updateOptions(E)},[E],M);let I=t.useCallback(()=>{var V;if(!s.current)return;i.current(s.current);let e=x(s.current,r||"",u||l||"text",h||""),a=x(s.current,o||"",p||l||"text",w||"");(V=f.current)==null||V.setModel({original:e,modified:a})},[l,o,p,r,u,h,w]),z=t.useCallback(()=>{var e;!S.current&&P.current&&(f.current=s.current.editor.createDiffEditor(P.current,{automaticLayout:!0,...E}),I(),(e=s.current)==null||e.editor.setTheme(R),b(!0),S.current=!0)},[E,R,I]);t.useEffect(()=>{M&&g.current(f.current,s.current)},[M]),t.useEffect(()=>{!C&&!M&&z()},[C,M,z]);function N(){var a,V,k,D;let e=(a=f.current)==null?void 0:a.getModel();L||((V=e==null?void 0:e.original)==null||V.dispose()),W||((k=e==null?void 0:e.modified)==null||k.dispose()),(D=f.current)==null||D.dispose()}return y.createElement(Z,{width:A,height:j,isEditorReady:M,loading:_,_ref:P,className:B,wrapperProps:G})}var fe=de;t.memo(fe);function ge(r){let o=t.useRef();return t.useEffect(()=>{o.current=r},[r]),o.current}var pe=ge,H=new Map;function he({defaultValue:r,defaultLanguage:o,defaultPath:l,value:u,language:p,path:h,theme:w="light",line:L,loading:W="Loading...",options:R={},overrideServices:_={},saveViewState:E=!0,keepCurrentModel:j=!1,width:A="100%",height:B="100%",className:G,wrapperProps:J={},beforeMount:Q=F,onMount:M=F,onChange:b,onValidate:C=F}){let[d,f]=t.useState(!1),[s,P]=t.useState(!0),g=t.useRef(null),i=t.useRef(null),S=t.useRef(null),I=t.useRef(M),z=t.useRef(Q),N=t.useRef(),e=t.useRef(u),a=pe(h),V=t.useRef(!1),k=t.useRef(!1);$(()=>{let n=Y.init();return n.then(c=>(g.current=c)&&P(!1)).catch(c=>(c==null?void 0:c.type)!=="cancelation"&&console.error("Monaco initialization: error:",c)),()=>i.current?K():n.cancel()}),m(()=>{var c,v,U,O;let n=x(g.current,r||u||"",o||p||"",h||l||"");n!==((c=i.current)==null?void 0:c.getModel())&&(E&&H.set(a,(v=i.current)==null?void 0:v.saveViewState()),(U=i.current)==null||U.setModel(n),E&&((O=i.current)==null||O.restoreViewState(H.get(h))))},[h],d),m(()=>{var n;(n=i.current)==null||n.updateOptions(R)},[R],d),m(()=>{!i.current||u===void 0||(i.current.getOption(g.current.editor.EditorOption.readOnly)?i.current.setValue(u):u!==i.current.getValue()&&(k.current=!0,i.current.executeEdits("",[{range:i.current.getModel().getFullModelRange(),text:u,forceMoveMarkers:!0}]),i.current.pushUndoStop(),k.current=!1))},[u],d),m(()=>{var c,v;let n=(c=i.current)==null?void 0:c.getModel();n&&p&&((v=g.current)==null||v.editor.setModelLanguage(n,p))},[p],d),m(()=>{var n;L!==void 0&&((n=i.current)==null||n.revealLine(L))},[L],d),m(()=>{var n;(n=g.current)==null||n.editor.setTheme(w)},[w],d);let D=t.useCallback(()=>{var n;if(!(!S.current||!g.current)&&!V.current){z.current(g.current);let c=h||l,v=x(g.current,u||r||"",o||p||"",c||"");i.current=(n=g.current)==null?void 0:n.editor.create(S.current,{model:v,automaticLayout:!0,...R},_),E&&i.current.restoreViewState(H.get(c)),g.current.editor.setTheme(w),L!==void 0&&i.current.revealLine(L),f(!0),V.current=!0}},[r,o,l,u,p,h,R,_,E,w,L]);t.useEffect(()=>{d&&I.current(i.current,g.current)},[d]),t.useEffect(()=>{!s&&!d&&D()},[s,d,D]),e.current=u,t.useEffect(()=>{var n,c;d&&b&&((n=N.current)==null||n.dispose(),N.current=(c=i.current)==null?void 0:c.onDidChangeModelContent(v=>{k.current||b(i.current.getValue(),v)}))},[d,b]),t.useEffect(()=>{if(d){let n=g.current.editor.onDidChangeMarkers(c=>{var U;let v=(U=i.current.getModel())==null?void 0:U.uri;if(v&&c.find(O=>O.path===v.path)){let O=g.current.editor.getModelMarkers({resource:v});C==null||C(O)}});return()=>{n==null||n.dispose()}}return()=>{}},[d,C]);function K(){var n,c;(n=N.current)==null||n.dispose(),j?E&&H.set(h,i.current.saveViewState()):(c=i.current.getModel())==null||c.dispose(),i.current.dispose()}return y.createElement(Z,{width:A,height:B,isEditorReady:d,loading:W,_ref:S,className:G,wrapperProps:J})}var Me=he,ve=t.memo(Me),Ee=ve;export{Ee as F};
